<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/base}">

<div layout:fragment="content" class="container-fluid p-0">
<div class="row">
<div class="col-6 col-lg-6">
<div class="row">
	<div class="col-3 col-lg-3">
		<div class="card">
			<div class="card-body text-center">
				<div class="mb-3">
					<h5 class="card-title">1. Init jobDetail Data</h5>
					<button class="btn btn-outline-primary" onclick="dataManage('initJobDetail')">실행</button>
				</div>
			</div>
		</div>
	</div>
	<div class="col-3 col-lg-3">
		<div class="card">
			<div class="card-body text-center">
				<div class="mb-3">
					<h5 class="card-title">2. Init Emblem Data</h5>
					<button class="btn btn-outline-primary" onclick="dataManage('initemblemData')">실행</button>
				</div>
			</div>
		</div>
	</div>
	<div class="col-3 col-lg-3">
		<div class="card">
			<div class="card-body text-center">
				<div class="mb-3">
					<h5 class="card-title">3. Init Avatar Data</h5>
					<button class="btn btn-outline-primary" onclick="dataManage('initShowRoomData')">실행</button>
				</div>
			</div>
		</div>
	</div>
	<div class="col-3 col-lg-3">
		<div class="card">
			<div class="card-body text-center">
				<div class="mb-3">
					<h5 class="card-title">4. Init Rank Data</h5>
					<button class="btn btn-outline-primary" onclick="dataManage('initRankData')">실행</button>
				</div>
			</div>
		</div>
	</div>
	<div class="col-3 col-lg-3">
		<div class="card">
			<div class="card-body text-center">
				<div class="mb-3">
					<h5 class="card-title">테스트용 버튼</h5>
					<button class="btn btn-outline-primary" onclick="dataManage('testCase')">실행</button>
				</div>
			</div>
		</div>
	</div>
	<div class="col-12 col-lg-12">
	
		<div class="card">
			<div class="card-body text-center">
				<div class="mb-3">
					<h5 class="card-title">CharId 조회</h5>
					<div class="row">
					<div class="mb-3 col-md-2">
					<select id="server" class="form-control">
						<option th:each="code : ${T(xyz.dunshow.constants.Server).values()}"
								th:value="${code.value}" th:text="${code.desc}">
						</option>
					</select>
					</div>
					<div class="mb-3 col-md-8">
					<input type="text" id="name" class="form-control"/>
					</div>
					<div class="mb-3 col-md-2">
					<button class="btn btn-outline-primary" onclick="charIdTest()">실행</button>
					</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	
	</div>
	</div>
	<div class="col-6 col-lg-6">
	<div class="row">
	<div class="col-3 col-lg-3">
		<div class="card">
			<div class="card-body text-center">
				<div class="mb-3">
					<h5 class="card-title">BackUp Avatar Data</h5>
					<button class="btn btn-outline-danger" onclick="dataManage('bakShowRoomData')">실행</button>
				</div>
			</div>
		</div>
	</div>
	<div class="col-4 col-lg-4">
		<div class="card">
			<div class="card-body text-center">
				<div class="mb-3">
					<h5 class="card-title">Rank Data 가져오기</h5>
					<button class="btn btn-outline-danger" onclick="dataManage('getRankByDundam')">실행</button>
				</div>
			</div>
		</div>
	</div>
</div>
</div>

<div style="display:none;">
	<div id="initJobDetail">JobDetail delete - select - insert (Noeple) 최초 DB 구성시에만 실행시켜주세요.</div>
	<div id="initemblemData">Emblem delete - select - insert (DnfNow)</div>
	<div id="initShowRoomData">classpath:static/initData/showroomdata.txt 데이터로 show_room 테이블을 초기화합니다. 최초 DB 구성시에만 실행시켜주세요.</div>
	<div id="initRankData">classpath:static/initData/rank.txt 데이터로 rank_data 테이블을 초기화 합니다. 최초 데이터베이스 구성시에만 실행시켜주세요.</div>
	<div id="getRankByDundam">rankData delete - select - insert (DunDam) 직업별 랭킹 1~200위 데이터를 크롤링합니다. (업데이트용) !!!!최초 DB 구성시에는 4. Init Rank Data 만 실행시켜 주세요.!!!! </div>
	<div id="bakShowRoomData">classpath:static/initData/showroomdata.txt 파일로 현 DB에 있는 데이터를 추출합니다. 운영시에는 사용할 필요가 없습니다.</div>
	<div id="testCase">AdminService에 test()를 호출합니다.</div>
</div>
<th:block layout:fragment="script">
    <script type="text/javascript">
    $(document).ready(function () {
    	$('.data-manage').addClass('active');
    	$.when(
            $.get('/admin/data.ajax')
            ).then(function (res1) {
                initData(res1.data);
            });
    });
    
    function initData(res) {
    	var data = res.data;
    }
    
    function dataManage(target) {
    	if (!confirm($('#'+target).text() + '  실행하시겠습니까?')) {
    		return false;
    	}

    	$.ajax({
    		url : '/admin/dataManage.ajax',
    		data : {
    			target : target
    		},
    		success : function(res) {
    			alert(res.message);
    		}
    	})
    	
    }
    
    function ioIdInsert(target) {
    	var job = $('#selectJob2').val();
    	
    	if (!job) {
    		return false;
    	}
    	$.ajax({
    		url : '/admin/ioIdInsert.ajax',
    		data : {
    			job : job,
    			target : target
    		},
    		success : function(res) {
    			alert(res.message);
    		}
    	})
    	
    }
    
    function charIdTest() {
    	var server = $('#server').val();
    	var name = $('#name').val();
    	
    	$.ajax({
    		url : '/admin/charIdTest.ajax',
    		data : {
    			server : server,
    			name : name
    		},
    		success : function(res) {
    			console.log(res.data);
    		}
    	})
    }
    
    </script>
</th:block>

</html>